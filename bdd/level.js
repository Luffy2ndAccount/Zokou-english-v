const a9_0x20a475=a9_0x547c;(function(_0x3d384d,_0x21bc0a){const _0x23cac3=a9_0x547c,_0x56a48e=_0x3d384d();while(!![]){try{const _0x4c35e4=-parseInt(_0x23cac3(0xb8))/0x1*(parseInt(_0x23cac3(0xac))/0x2)+-parseInt(_0x23cac3(0xa3))/0x3*(parseInt(_0x23cac3(0xa8))/0x4)+-parseInt(_0x23cac3(0xa7))/0x5+-parseInt(_0x23cac3(0xab))/0x6+parseInt(_0x23cac3(0xaa))/0x7*(parseInt(_0x23cac3(0xb1))/0x8)+-parseInt(_0x23cac3(0xa6))/0x9*(parseInt(_0x23cac3(0xbb))/0xa)+parseInt(_0x23cac3(0xbd))/0xb;if(_0x4c35e4===_0x21bc0a)break;else _0x56a48e['push'](_0x56a48e['shift']());}catch(_0x34b219){_0x56a48e['push'](_0x56a48e['shift']());}}}(a9_0x47ce,0xbe286),require(a9_0x20a475(0xba))[a9_0x20a475(0xb6)]());function a9_0x547c(_0x44d168,_0x2aee46){const _0x47ce18=a9_0x47ce();return a9_0x547c=function(_0x547ca2,_0x2e5a2f){_0x547ca2=_0x547ca2-0xa2;let _0x5117aa=_0x47ce18[_0x547ca2];return _0x5117aa;},a9_0x547c(_0x44d168,_0x2aee46);}const {Pool}=require('pg'),s=require(a9_0x20a475(0xae)),dbUrl=s[a9_0x20a475(0xaf)]?s[a9_0x20a475(0xaf)]:a9_0x20a475(0xa2),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);function a9_0x47ce(){const _0x242164=['error','31362991mwtESM','SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','775134shKPEQ','rows','length','45JsmZPx','230375nQWZZo','24olUIHG','\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20','895566UPnptq','3026724xexuOH','375866ptziab','connect','../set','DATABASE_URL','SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','56RPIGJB','UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','config','query','3hyxCvx','release','dotenv','606530JJzLWh'];a9_0x47ce=function(){return _0x242164;};return a9_0x47ce();}async function createUsersRankTable(){const _0x23f24b=a9_0x20a475,_0x5b9352=await pool[_0x23f24b(0xad)]();try{await _0x5b9352[_0x23f24b(0xb7)](_0x23f24b(0xa9));}catch(_0x1a4961){console[_0x23f24b(0xbc)]('Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:',_0x1a4961);}finally{_0x5b9352['release']();}}async function ajouterOuMettreAJourUserData(_0x1b6a80){const _0x576bb8=a9_0x20a475,_0x14d582=await pool[_0x576bb8(0xad)]();try{const _0x5040a1=await _0x14d582['query']('SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1',[_0x1b6a80]),_0x23b2d8=_0x5040a1[_0x576bb8(0xa4)][_0x576bb8(0xa5)]>0x0;_0x23b2d8?await _0x14d582[_0x576bb8(0xb7)](_0x576bb8(0xb2),[_0x1b6a80]):await _0x14d582[_0x576bb8(0xb7)]('INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)',[_0x1b6a80,0xa,0x1]);}catch(_0x1f7db8){console[_0x576bb8(0xbc)](_0x576bb8(0xb3),_0x1f7db8);}finally{_0x14d582[_0x576bb8(0xb9)]();}};async function getMessagesAndXPByJID(_0x5e2012){const _0x5cde27=a9_0x20a475,_0x378fc6=await pool['connect']();try{const _0xd17b38=_0x5cde27(0xb0),_0x5daf12=await _0x378fc6[_0x5cde27(0xb7)](_0xd17b38,[_0x5e2012]);if(_0x5daf12['rows'][_0x5cde27(0xa5)]>0x0){const {messages:_0x533a53,xp:_0x3054a5}=_0x5daf12[_0x5cde27(0xa4)][0x0];return{'messages':_0x533a53,'xp':_0x3054a5};}else return{'messages':0x0,'xp':0x0};}catch(_0x5a8a47){return console[_0x5cde27(0xbc)](_0x5cde27(0xb5),_0x5a8a47),{'messages':0x0,'xp':0x0};}finally{_0x378fc6[_0x5cde27(0xb9)]();}}async function getBottom10Users(){const _0x5291f1=a9_0x20a475,_0x1cf27a=await pool[_0x5291f1(0xad)]();try{const _0x24f0c6=_0x5291f1(0xbe),_0x40f5e7=await _0x1cf27a[_0x5291f1(0xb7)](_0x24f0c6);return _0x40f5e7[_0x5291f1(0xa4)];}catch(_0x30d4bd){return console[_0x5291f1(0xbc)](_0x5291f1(0xb4),_0x30d4bd),[];}finally{_0x1cf27a[_0x5291f1(0xb9)]();}}createUsersRankTable(),module['exports']={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};